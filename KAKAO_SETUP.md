# 카카오톡 1:1 채팅 연동 가이드

## 📋 준비사항

### 1. 카카오톡 채널(플러스친구) 생성
1. [카카오톡 채널 관리자 센터](https://center-pf.kakao.com/) 접속
2. 카카오 계정으로 로그인
3. **"새 채널 만들기"** 클릭
4. 채널 정보 입력:
   - 채널 이름: `온숨` (또는 원하는 이름)
   - 검색용 아이디: `@onsoom` (원하는 ID)
   - 카테고리: 적절한 카테고리 선택
5. 채널 생성 완료

### 2. 채널 URL 확인
1. 채널 관리자 센터 > **관리** > **상세설정**
2. **"채널 URL"** 복사
   - 형식: `http://pf.kakao.com/_xjAxexj` (예시)
3. 채널 ID 기억하기 (URL의 마지막 부분, 예: `_xjAxexj`)

### 3. 1:1 채팅 활성화
1. 채널 관리자 센터 > **관리** > **고객 응대**
2. **"1:1 채팅"** 토글 활성화
3. 응대 시간, 자동 응답 등 설정 (선택사항)

---

## ⚙️ 프로젝트 설정

### 1. 환경변수 파일 생성

프로젝트 루트 디렉토리에 `.env.local` 파일을 생성하세요:

```bash
# .env.local 파일 생성
# 윈도우
type nul > .env.local

# Mac/Linux
touch .env.local
```

### 2. 환경변수 설정

`.env.local` 파일에 다음 내용을 추가하세요:

```env
# 카카오톡 채널 URL
# 방법 1: 직접 채팅방으로 이동 (권장)
NEXT_PUBLIC_KAKAO_CHANNEL_URL=http://pf.kakao.com/_당신의채널ID/chat

# 방법 2: 채널 홈으로 이동 후 채팅 버튼 클릭
# NEXT_PUBLIC_KAKAO_CHANNEL_URL=http://pf.kakao.com/_당신의채널ID
```

**예시:**
```env
# 채널 ID가 _xjAxexj 인 경우
NEXT_PUBLIC_KAKAO_CHANNEL_URL=http://pf.kakao.com/_xjAxexj/chat
```

### 3. 개발 서버 재시작

환경변수 변경 후 개발 서버를 재시작하세요:

```bash
# 서버 중지 (Ctrl + C)
# 서버 재시작
npm run dev
```

---

## 🧪 테스트

1. 웹사이트 우측 하단의 **노란색 카카오톡 버튼** 클릭
2. 새 탭에서 카카오톡 채널 채팅방이 열리는지 확인
3. 모바일에서도 테스트 (카카오톡 앱으로 자동 연결됨)

---

## 🔍 채널 URL 찾는 방법

### 방법 1: 관리자 센터에서 확인
1. [채널 관리자 센터](https://center-pf.kakao.com/) 로그인
2. 해당 채널 선택
3. **관리 > 상세설정** 메뉴
4. **"채널 URL"** 항목에서 확인

### 방법 2: 카카오톡 앱에서 확인
1. 카카오톡 앱에서 본인의 채널 검색
2. 채널 홈 화면에서 **공유하기** 선택
3. 링크 복사

### 방법 3: 검색용 ID로 URL 생성
검색용 ID가 `@onsoom`인 경우:
```
http://pf.kakao.com/@onsoom
```
> **주의:** @ 기호는 URL에 그대로 포함합니다

---

## 💡 URL 형식

### 직접 채팅방으로 이동 (권장)
```
http://pf.kakao.com/_채널ID/chat
```
- 장점: 바로 채팅 시작 가능
- 모바일: 카카오톡 앱으로 즉시 이동
- PC: 카카오톡 웹 채팅창 열림

### 채널 홈으로 이동
```
http://pf.kakao.com/_채널ID
```
- 장점: 채널 소개, 게시글 등 확인 가능
- 단점: 사용자가 채팅 버튼을 한 번 더 클릭해야 함

---

## 🎨 커스터마이징

### 버튼 색상 변경
`components/KakaoFloatingButton.tsx` 파일에서:
```tsx
// 배경색 변경
className="... bg-[#FEE500] ..."  // 카카오 노란색 (기본)
// 다른 색상 예시:
// bg-blue-500   (파란색)
// bg-green-500  (초록색)
// bg-purple-500 (보라색)
```

### 버튼 위치 변경
```tsx
// 우측 하단 (기본)
className="fixed bottom-6 right-6 ..."

// 좌측 하단
className="fixed bottom-6 left-6 ..."

// 우측 상단
className="fixed top-24 right-6 ..."
```

### 툴팁 문구 변경
```tsx
<span className="...">
  카카오톡 상담  // 이 텍스트 변경
</span>
```

---

## ❗ 문제 해결

### 버튼 클릭 시 아무 반응이 없어요
1. 브라우저 콘솔(F12)에서 에러 확인
2. `.env.local` 파일이 프로젝트 루트에 있는지 확인
3. 개발 서버 재시작

### "채널을 찾을 수 없습니다" 오류
1. 채널 URL이 올바른지 확인
2. 채널이 공개 상태인지 확인 (관리자 센터에서 설정)
3. 채널 ID가 정확한지 재확인

### 모바일에서 작동하지 않아요
1. 카카오톡 앱이 설치되어 있는지 확인
2. 앱 버전이 최신인지 확인
3. 브라우저 설정에서 앱 연결 허용 확인

### 채팅이 자동으로 시작되지 않아요
- URL 끝에 `/chat`이 붙어있는지 확인
- 채널 관리자 센터에서 "1:1 채팅" 기능이 활성화되어 있는지 확인

---

## 📞 추가 문의

카카오톡 채널 운영에 대한 자세한 내용은:
- [카카오 비즈니스 고객센터](https://cs.kakao.com/)
- [카카오톡 채널 가이드](https://kakaobusiness.gitbook.io/main/)

